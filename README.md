# cx16assem

File-based 65c02 assembler for Commander-X16 (Work in progress)

Requires recent prog8 compiler to build from source.

## Compiling the assembler

The assembler requires some autogenerated code for instruction matching.
This code is created by a python script. You can do this manually and then use
the Prog8 compiler ``p8compile`` to finally compile the assembler, but
it's easier to use the supplied Makefile:

Just type 'make'.

Type 'make emu' to immediately boot the assembler in the Commander X16 emulator.


## Usage

Usage should be self-explanatory.
When started, the assembler prints the available commands.
After successfully assembling a source file, a summary will be printed. 
You can then enter the filename to save the program as on disk (will overwrite existing file with the same name!).
It's always saved in PRG format, so you can load the program again with ``LOAD "NAME",8,1``

At the moment, the source file is cached in (V)RAM and so is limited to 62 Kb for now.

## Todo

- write output machine code to upper banked RAM instead of main memory, so we can assemble larger programs,
  and it doesn't potentially overwrite the assembler itself or the symbol table in system ram.
  (this also means we can't simply use SAVE routine anymore)
  
- optimize phase 1, it now does too many things that are actually only needed in phase 2

- use banked RAM instead of VRAM to cache the source file, this means rewriting the i/o routines again,
  but it will allow loading files larger than 62 Kb


### Maybe some day:

- relative labels (+ / -)

- simple expressions

- local scoped labels

- macros
